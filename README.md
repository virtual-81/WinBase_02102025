# WinBASE (Delphi 7 ? 12)

Миграция настольного приложения WinBASE с Delphi 7 на Delphi 12.

Ключевые изменения:
- Устранена потеря иконки раскладки клавиатуры (переработан модуль баркода и переключение раскладки).
- Современный вывод PDF на базе Synopse SynPDF (Unicode поддержка).
- Новое поле даты рождения в карточке стрелка: единое `ДД.ММ.ГГГГ` c авто-нормализацией.
  - Допускаются упрощенные форматы: `ДДММГГ`, `ДДММГГГГ`, `ДД.ММ.ГГ`.
  - Двухзначный год: 00..30 ? 2000+, 31..99 ? 1900+.
  - Старые поля Год и ДД.ММ оставлены для совместимости, переведены в только чтение.
  - Во всех протоколах выводится формат `ДД.ММ.ГГГГ` (если известны день/месяц/год), иначе — год.

## Структура
- `form_shooter.pas/dfm` — форма стрелка: добавлено `edtBirthFull` и валидация.
- `data_safe.pas` и `data_hardcoded.pas` — свойство `TShooterItem.BirthFullStr` с парсингом/форматированием.
- Печатные формы обновлены на `BirthFullStr`.

## Git: как создать репозиторий
Перед любыми действиями с Git — предлагаем локально собрать и пробежать по основным сценариям (печать, сохранение PDF, ввод даты рождения) в IDE Delphi.

Если всё работает, инициализируйте репозиторий и отправьте на GitHub:

```powershell
# Инициализация (один раз)
git init
git remote add origin https://github.com/virtual-81/WinBase_7_12.git

# Проверьте, что .gitignore корректно отсекает артефакты сборки
git status

# Добавление и первый коммит
git add .
git commit -m "Initial migration to Delphi 12; SynPDF; BirthFull field"

# Публикация основной ветки (если репозиторий пустой)
git branch -M main
git push -u origin main
```

Примечание: если репозиторий уже существует и содержит историю, используйте `git pull --rebase origin main` перед пушем, чтобы избежать конфликтов.

## Сборка
- В Delphi 12 IDE; CLI для CE недоступен.
- В VS Code доступны задачи для компиляции старой ветки Delphi 7 и FreePascal (см. `.vscode/tasks.json`).

## Тесты вручную
- Вводите в поле даты: `220222` ? `22.02.2022`; `11.03.81` ? `11.03.1981`.
- Печать и «Сохранить в PDF» — файл создается, кириллица отображается корректно.
